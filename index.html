<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Everyday Store</title>

<style>
  #processingBox {
  display: none;
  margin-top: 12px;
  padding: 12px;
  background: rgba(0,0,0,0.6);
  color: #ffd54f;
  border-radius: 10px;
  text-align: center;
  font-size: 14px;
  animation: pulse 1s infinite;
}

@keyframes pulse {
  0% { opacity: 0.4; }
  50% { opacity: 1; }
  100% { opacity: 0.4; }
}
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: cursive;
  background: linear-gradient(180deg, #050b1f, #0c1430);
  color: #fff;
  overflow-x: hidden;
}
.container {
  max-width: 420px;
  width: 100%;
  margin: 16px auto;
  padding: 20px;
  border-radius: 24px;
  overflow: hidden;
  background: #bdbdbd;
}
h1{
  text-align:center;
}
input,select,button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius: 14px;
  border:none;
  font-size:15px;
}
  input {
  background-clip: padding-box;
}
 
button{
  background:#2ecc71;
  font-weight:bold;
  cursor:pointer;
}
.qr-box {
  width: 100%;
  text-align: center;
}
#qrImage {
  width: 220px;
  max-width: 100%;
  display: block;
  margin: 12px auto;
  padding: 12px;
  background: #fff;
  border-radius: 16px;
  overflow: hidden;
  box-sizing: border-box;
}
/* Disable clicks ONLY on banner images */
.slider img,
.top-banner img,
header img {
  pointer-events: none;
}
  .slider {
  pointer-events: none;
}

/* FORCE sign-in area to be clickable */
#topAuth {
  pointer-events: auto !important;
  position: fixed;
  z-index: 999999;
}

#topAuth button {
  background: #1abc9c;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: bold;
  cursor: pointer;
}
.note{
  font-size:13px;
  text-align:center;
  margin-top:10px;
  color:#f1c40f;
}
#processingBox,#successBox{
  display:none;
  text-align:center;
  margin-top:12px;
}
#successBox{
  color:#2ecc71;
}
.social-icons {
  display: flex;
  justify-content: center;
  gap: 14px;
  margin-top: 20px;
}
.social-icons img {
  width: 44px;
  height: 44px;
  object-fit: contain;
}
  .container {
  background: rgba(0,0,0,0.35);
  border-radius: 20px;
  box-shadow: 0 0 25px rgba(0,0,0,0.6);
}
  .input, select {
  background: #111;
  color: #fff;
}
  /* Button press animation */
button {
  transition: transform 0.12s ease, box-shadow 0.12s ease;
}

button:active {
  transform: scale(0.96);
  box-shadow: 0 0 12px rgba(46, 204, 113, 0.6);
}
  /* ===== TOP BANNER SLIDER ===== */
.slider {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: 16px;
  overflow: hidden;
  margin-bottom: 15px;
  position: relative;
}
.slider img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
}

.slider img.active {
  display: block;
}
</style>
</head>

<body>
  <!-- TOP LEFT AUTH BUTTON -->
<div id="topAuth">
  <button id="topLoginBtn">Sign In</button>
  <button id="topLogoutBtn" style="display:none;">Logout</button>
</div>
<div class="container">
  
<!-- TOP BANNER SLIDER -->
<div class="slider">
  <img src="images/banner1.jpg" class="active">
  <img src="images/banner2.jpg">
  <img src="images/banner3.jpg">
</div>
<h1>Everyday Store</h1>

<input 
  type="tel"
  id="playerID"
  placeholder="Player ID (8‚Äì11 digits)"
  inputmode="numeric"
  maxlength="11"
>
<input 
  type="tel"
  id="serverID"
  placeholder="Server ID (3‚Äì5 digits)"
  inputmode="numeric"
  maxlength="5"
>
<input 
  type="tel"
  id="mobile"
  placeholder="Mobile Number"
  inputmode="numeric"
  maxlength="10"
>
<input
  type="email"
  id="email"
  placeholder="Email (auto-filled from Google)"
  readonly
>
<select id="pack" onchange="updateQR()">
  <option value="">Select Pack</option>

  <!-- SMALL -->
  <option value="mlbb-topup/qr/qr-3.png">3 Diamonds ‚Äì ‚Çπ8</option>
  <option value="mlbb-topup/qr/qr-5.png">5 Diamonds ‚Äì ‚Çπ12</option>
  <option value="mlbb-topup/qr/qr-11.png">11 Diamonds ‚Äì ‚Çπ23</option>
  <option value="mlbb-topup/qr/qr-22.png">22 Diamonds ‚Äì ‚Çπ35</option>

  <!-- MEDIUM -->
  <option value="mlbb-topup/qr/qr-55.png">55 Diamonds ‚Äì ‚Çπ81</option>
  <option value="mlbb-topup/qr/qr-86.png">86 Diamonds ‚Äì ‚Çπ118</option>
  <option value="mlbb-topup/qr/qr-112.png">112 Diamonds ‚Äì ‚Çπ155</option>
  <option value="mlbb-topup/qr/qr-172.png">172 Diamonds ‚Äì ‚Çπ227</option>
  <option value="mlbb-topup/qr/qr-257.png">257 Diamonds ‚Äì ‚Çπ319</option>

  <!-- LARGE -->
  <option value="mlbb-topup/qr/qr-514.png">514 Diamonds ‚Äì ‚Çπ637</option>
  <option value="mlbb-topup/qr/qr-706.png">706 Diamonds ‚Äì ‚Çπ855</option>
  <option value="mlbb-topup/qr/qr-1050.png">1050 Diamonds ‚Äì ‚Çπ1275</option>
  <option value="mlbb-topup/qr/qr-1135.png">1135 Diamonds ‚Äì ‚Çπ1385</option>
  <option value="mlbb-topup/qr/qr-2195.png">2195 Diamonds ‚Äì ‚Çπ2560</option>
  <option value="mlbb-topup/qr/qr-3688.png">3688 Diamonds ‚Äì ‚Çπ4475</option>
  <option value="mlbb-topup/qr/qr-5532.png">5532 Diamonds ‚Äì ‚Çπ6450</option>
  <option value="mlbb-topup/qr/qr-9288.png">9288 Diamonds ‚Äì ‚Çπ10950</option>

  <!-- WEEKLY -->
  <option value="mlbb-topup/qr/qr-weekly-1.png">Weekly Pass ‚Äì ‚Çπ133</option>
  <option value="mlbb-topup/qr/qr-weekly-172.png">Weekly + 172 Diamonds ‚Äì ‚Çπ360</option>
  <option value="mlbb-topup/qr/qr-weekly-2.png">2 Weekly Passes ‚Äì ‚Çπ266</option>
</select>
  
<div class="qr-box">
  <img id="qrImage" alt="QR Code" style="display:none;">
</div>

<div class="note">‚ö†Ô∏è QR appears automatically after selecting a pack</div>
<!-- LIVE BUYERS -->
<div id="liveBuyers" style="
  margin:12px 0;
  padding:10px;
  background:rgba(0,0,0,0.45);
  border-radius:12px;
  font-size:14px;
  color:#2ecc71;
  text-align:center;
  position: relative;
  z-index: 1;
">
üü¢ Someone purchased Weekly Pass
  
</div>
  <!-- SOUNDS -->
<audio id="clickSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="successSound" src="https://assets.mixkit.co/active_storage/sfx/1116/1116-preview.mp3"></audio>

<script>
function playClick() {
  document.getElementById("clickSound").currentTime = 0;
  document.getElementById("clickSound").play();
}
function playSuccess() {
  document.getElementById("successSound").currentTime = 0;
  document.getElementById("successSound").play();
}
</script>

<button id="orderBtn" type="button" style="position: relative; z-index: 10;">
  Order After Payment
</button>

<a href="https://chat.whatsapp.com/IHdIzkLFzgBJkjxjiUVBxD" target="_blank">
  <button style="background:#25D366; color:white; margin-top:10px; font-weight:bold;">
    Join WhatsApp Store
  </button>
</a>
   

<div id="processingBox">‚è≥ Processing your order, please wait...</div>

<div id="successBox">
  ‚úÖ Order placed successfully<br>
  <b>Order ID:</b> <span id="orderIdText"></span><br>
  Please tap <b>SEND</b> in Gmail to confirm.
</div>


<div class="social-icons">
  <a href="https://www.instagram.com/everyday_store_official" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png">
  </a>
  <a href="https://youtube.com/@everydaystore-d4w" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png">
  </a>
  <a href="https://wa.me/917679393645" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png">
  </a>
</div>


<script>
function updateQR() {
  const pack = document.getElementById("pack");
  const qr = document.getElementById("qrImage");

  if (!pack.value) {
    qr.style.display = "none";
    return;
  }

  // IMPORTANT: correct absolute path
  qr.src = "https://everydaystore.github.io/" + pack.value;
  qr.style.display = "block";
}
</script>
 

<script>
function sendOrder() {
  const user = auth.currentUser;
if (!user) {
  alert("Please sign in with Google to place an order");
  return;
}
  const playerID = document.getElementById("playerID").value.trim();
  const serverID = document.getElementById("serverID").value.trim();
  const mobile   = document.getElementById("mobile").value.trim();
  const pack     = document.getElementById("pack");

  if (!playerID || !serverID || !mobile || !pack.value) {
    alert("Please fill all details and select a pack");
    return;
  }

  const orderId = "ORD-" + Date.now();
  document.getElementById("orderIdText").innerText = orderId;
  document.getElementById("processingBox").style.display = "block";

  // ‚úÖ DEFINE FIRST
  const email = auth.currentUser.email;
  const subject = encodeURIComponent("MLBB Order Confirmation");
  const body = encodeURIComponent(
    "Order ID: " + orderId +
    "\nPlayer ID: " + playerID +
    "\nServer ID: " + serverID +
    "\nMobile: " + mobile +
    "\nEmail: " + email +
    "\n\nPlease confirm my payment."
  );

  // ‚úÖ OPEN GMAIL ‚Äî MUST BE IMMEDIATE
  window.location.href =
    "mailto:everydaystore@gmail.com?subject=" + subject + "&body=" + body;

  // ‚úÖ UI AFTER (safe to delay)
  setTimeout(() => {
    document.getElementById("processingBox").style.display = "none";
    document.getElementById("successBox").style.display = "block";
  }, 1200);
}
</script>
  
  <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import {
  getAuth,
  GoogleAuthProvider,
  signInWithRedirect,
  getRedirectResult,
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
    
const firebaseConfig = {
  apiKey: "AIzaSyB7ZS8S879-gQFikWUyq4y0rDja7DzboK",
  authDomain: "everyday-store-6debb.firebaseapp.com",
  projectId: "everyday-store-6debb",
  storageBucket: "everyday-store-6debb.appspot.com",
  messagingSenderId: "488459400808",
  appId: "1:488459400808:web:3f0f4b3eee464bed12ddd"
};

 const app = initializeApp(firebaseConfig);
 const auth = getAuth(app);
 window.auth = auth;
 const provider = new GoogleAuthProvider();
function doGoogleLogin() {
  signInWithRedirect(auth, provider);
}

 getRedirectResult(auth)
   .then((result) => {
     if (result && result.user) {
       console.log("Google login success:", result.user.email);
     }
   })
   .catch((error) => {
     console.error("Redirect login error:", error);
   });

 const db = getFirestore(app);
 const storeRef = doc(db, "store", "store");

document.addEventListener("DOMContentLoaded", () => {

  document.getElementById("topLogoutBtn").onclick = async () => {
    await signOut(auth);
  };

  document.getElementById("topLoginBtn").onclick = () => {
    doGoogleLogin();
  };

});
// AUTH STATE CHANGE
onAuthStateChanged(auth, (user) => {
  const emailInput = document.getElementById("email");

  if (user) {
    document.getElementById("topLoginBtn").style.display = "none";
    document.getElementById("topLogoutBtn").style.display = "inline-block";
    document.getElementById("userInfo").innerText =
      "Logged in as: " + user.email;

    emailInput.value = user.email;
  } else {
    document.getElementById("topLoginBtn").style.display = "inline-block";
    document.getElementById("topLogoutBtn").style.display = "none";
    document.getElementById("userInfo").innerText = "";
    emailInput.value = "";
  }
});

    

});
</script>
  <!-- LIVE BUYERS SCRIPT -->
<script>
const buyers = [
  "üü¢ Someone bought 55 Diamonds",
  "üü¢ Weekly Pass purchased",
  "üü¢ Someone bought 86 Diamonds",
  "üü¢ Order placed for 112 Diamonds",
  "üü¢ Someone purchased 172 Diamonds",
  "üü¢ Weekly Pass purchased just now",
  "üü¢ Someone bought 257 Diamonds"
];

let i = 0;
const box = document.getElementById("liveBuyers");

if (box) {
  setInterval(() => {
    i = (i + 1) % buyers.length;
    box.innerText = buyers[i];
  }, 3500);
}
</script>
  <!-- AUTO SLIDER SCRIPT -->
  <script>
    const slides = document.querySelectorAll(".slider img");
    let currentSlide = 0;

    setInterval(() => {
      slides[currentSlide].classList.remove("active");
      currentSlide = (currentSlide + 1) % slides.length;
      slides[currentSlide].classList.add("active");
    }, 3000);
  </script>

<script>
document.getElementById("orderBtn").addEventListener("click", () => {
  playClick();
  sendOrder();
});
</script>

</body>
</html>

