<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Everyday Store</title>

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: cursive;
  background: linear-gradient(180deg, #050b1f, #0c1430);
  color: #fff;
}

/* TOP AUTH */
#topAuth {
  position: fixed;
  top: 12px;
  left: 12px;
  z-index: 999999;
}
#topAuth button {
  background: #1abc9c;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: bold;
  cursor: pointer;
}

/* CONTAINER */
.container {
  max-width: 420px;
  margin: 70px auto 20px;
  padding: 20px;
  border-radius: 20px;
  background: rgba(0,0,0,0.35);
}

/* SLIDER */
.slider {
  width: 100%;
  aspect-ratio: 16 / 9;
  overflow: hidden;
  border-radius: 16px;
  margin-bottom: 15px;
}
.slider img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: none;
  pointer-events: none;
}
.slider img.active { display: block; }

h1 { text-align: center; }

input, select, button {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 14px;
  border: none;
  font-size: 15px;
}

input, select {
  background: #111;
  color: #fff;
}

button {
  background: #2ecc71;
  font-weight: bold;
  cursor: pointer;
}

button:active {
  transform: scale(0.96);
}

/* QR */
.qr-box {
  text-align: center;
}
#qrImage {
  width: 220px;
  background: #fff;
  padding: 12px;
  border-radius: 16px;
  display: none;
}

/* INFO */
.note {
  text-align: center;
  font-size: 13px;
  color: #f1c40f;
  margin-top: 10px;
}

#processingBox, #successBox {
  display: none;
  text-align: center;
  margin-top: 12px;
}

#successBox { color: #2ecc71; }

/* LIVE BUYERS */
#liveBuyers {
  margin: 12px 0;
  padding: 10px;
  background: rgba(0,0,0,0.45);
  border-radius: 12px;
  text-align: center;
}

/* SOCIAL */
.social-icons {
  display: flex;
  justify-content: center;
  gap: 14px;
  margin-top: 20px;
}
.social-icons img {
  width: 44px;
  height: 44px;
}
</style>
</head>

<body>

<!-- TOP LOGIN -->
<div id="topAuth">
  <button id="topLoginBtn">Sign In</button>
  <button id="topLogoutBtn" style="display:none;">Logout</button>
</div>

<div class="container">

<div class="slider">
  <img src="images/banner1.jpg" class="active">
  <img src="images/banner2.jpg">
  <img src="images/banner3.jpg">
</div>

<h1>Everyday Store</h1>

<input type="tel" id="playerID" placeholder="Player ID (8-11 digits)" maxlength="11">
<input type="tel" id="serverID" placeholder="Server ID (3-5 digits)" maxlength="5">
<input type="tel" id="mobile" placeholder="Mobile Number" maxlength="10">

<input type="email" id="email" placeholder="Email (auto-filled from Google)" readonly>

<select id="pack" onchange="updateQR()">
  <option value="">Select Pack</option>
  <option value="mlbb-topup/qr/qr-3.png">3 Diamonds - ‚Çπ8</option>
  <option value="mlbb-topup/qr/qr-5.png">5 Diamonds - ‚Çπ12</option>
  <option value="mlbb-topup/qr/qr-11.png">11 Diamonds - ‚Çπ23</option>
  <option value="mlbb-topup/qr/qr-weekly-1.png">Weekly Pass - ‚Çπ133</option>
</select>

<div class="qr-box">
  <img id="qrImage" alt="QR Code">
</div>

<div class="note">‚ö† QR appears after selecting a pack</div>

<div id="liveBuyers">üü¢ Someone purchased Weekly Pass</div>

<a id="mailLink" href="#">
  <button id="orderBtn">Order After Payment</button>
</a>

<a href="https://chat.whatsapp.com/IHdIzkLFzgBJkjxjiUVBxD" target="_blank">
  <button style="background:#25D366;color:#fff;margin-top:10px;">Join WhatsApp Store</button>
</a>

<div id="processingBox">‚è≥ Processing your order‚Ä¶</div>
<div id="successBox">
  ‚úÖ Order placed successfully<br>
  <b>Order ID:</b> <span id="orderIdText"></span><br>
  Please tap <b>SEND</b> in Gmail to confirm.
</div>

<div class="social-icons">
  <a href="https://www.instagram.com/everyday_store_official" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png">
  </a>
  <a href="https://youtube.com/@everydaystore0" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png">
  </a>
  <a href="https://wa.me/917679393645" target="_blank">
    <img src="https://cdn-icons-png.flaticon.com/512/733/733585.png">
  </a>
</div>

</div>

<!-- NORMAL SCRIPTS -->
<script>
function updateQR() {
  const pack = document.getElementById("pack");
  const qr = document.getElementById("qrImage");
  if (!pack.value) {
    qr.style.display = "none";
    return;
  }
  qr.src = "https://everydaystore.github.io/" + pack.value;
  qr.style.display = "block";
}

const buyers = [
  "üü¢ Someone bought 55 Diamonds",
  "üü¢ Weekly Pass purchased",
  "üü¢ Someone bought 172 Diamonds",
  "üü¢ Weekly Pass purchased just now"
];
let i = 0;
setInterval(() => {
  document.getElementById("liveBuyers").innerText = buyers[i++ % buyers.length];
}, 3500);

const slides = document.querySelectorAll(".slider img");
let s = 0;
setInterval(() => {
  slides[s].classList.remove("active");
  s = (s + 1) % slides.length;
  slides[s].classList.add("active");
}, 3000);
</script>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getAuth,
  GoogleAuthProvider,
  signInWithPopup,
  signInWithRedirect,
  signOut,
  onAuthStateChanged
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyB7ZSS8879-gQFikwUqy4y0rDja7DzboK",
  authDomain: "everyday-store-6debb.firebaseapp.com",
  projectId: "everyday-store-6debb"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

function doGoogleLogin() {
  const isMobile = /Android|iPhone|iPad/i.test(navigator.userAgent);
  isMobile
    ? signInWithRedirect(auth, provider)
    : signInWithPopup(auth, provider);
}

document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("topLoginBtn").onclick = doGoogleLogin;
  document.getElementById("topLogoutBtn").onclick = () => signOut(auth);
});

onAuthStateChanged(auth, user => {
  const emailInput = document.getElementById("email");
  if (user) {
    topLoginBtn.style.display = "none";
    topLogoutBtn.style.display = "inline-block";
    emailInput.value = user.email;
  } else {
    topLoginBtn.style.display = "inline-block";
    topLogoutBtn.style.display = "none";
    emailInput.value = "";
  }
});

document.getElementById("orderBtn").addEventListener("click", () => {
  if (!auth.currentUser) {
    alert("Please sign in with Google first");
    return;
  }

  const orderId = "ORD-" + Date.now();
  document.getElementById("orderIdText").innerText = orderId;

  const subject = encodeURIComponent("MLBB Order Confirmation");
  const body = encodeURIComponent(
    "Order ID: " + orderId +
    "\nEmail: " + auth.currentUser.email +
    "\n\nPlease confirm my payment."
  );

  const mailto =
    "mailto:everydaystore@gmail.com?subject=" + subject + "&body=" + body;

  // üî• SET LINK FIRST
  document.getElementById("mailLink").href = mailto;

  // UI feedback
  document.getElementById("processingBox").style.display = "block";

  setTimeout(() => {
    document.getElementById("processingBox").style.display = "none";
    document.getElementById("successBox").style.display = "block";
  }, 1200);
});
</script>

</body>
</html>
